# Vercel Hobby 플랜 제한 사항 및 해결 방법

## 📋 문제 상황

Vercel Hobby 플랜은 **하루에 한 번만 크론 작업을 실행**할 수 있습니다.

현재 설정된 시간별 크론 작업(`0 * * * *`)은 하루에 24번 실행되므로 Hobby 플랜 제한을 초과합니다.

## ✅ 해결 방법

### 1. 시간별 크론 작업 제거

`vercel.json`에서 시간별 크론 작업을 제거했습니다:

```json
{
  "crons": [
    {
      "path": "/api/cron/daily",
      "schedule": "0 0 * * *"
    }
    // 시간별 크론 작업 제거됨
  ]
}
```

### 2. 일일 크론 작업으로 통합

시간별 통계가 필요한 경우, 일일 크론 작업에서 처리하거나 수동으로 호출할 수 있습니다.

#### 옵션 1: 일일 크론 작업에서 시간별 통계 집계

일일 크론 작업에서 전날의 시간별 통계를 한 번에 집계할 수 있습니다.

#### 옵션 2: 수동 호출

필요시 시간별 크론 작업 API를 수동으로 호출할 수 있습니다:

```bash
curl -X GET "https://your-project.vercel.app/api/cron/hourly" \
  -H "Authorization: Bearer YOUR_CRON_SECRET"
```

### 3. Pro 플랜 업그레이드 (선택사항)

시간별 크론 작업이 필요한 경우 Vercel Pro 플랜으로 업그레이드하면 모든 크론 작업 기능을 사용할 수 있습니다.

**Pro 플랜 혜택:**
- 무제한 크론 작업 실행
- 더 긴 함수 실행 시간
- 더 많은 빌드 시간
- 우선 지원

## 📝 현재 설정

### 활성화된 크론 작업

- **일일 크론 작업**: 매일 자정 (00:00) 실행
  - 경로: `/api/cron/daily`
  - 스케줄: `0 0 * * *`
  - 기능: 일일 통계 집계, 오래된 세션 정리

### 비활성화된 크론 작업

- **시간별 크론 작업**: 매시간 실행 (Hobby 플랜 제한으로 비활성화)
  - 경로: `/api/cron/hourly`
  - 스케줄: `0 * * * *` (제거됨)
  - 기능: 시간별 통계 조회
  - **참고**: API 엔드포인트는 유지되어 수동 호출 가능

## 🔄 대안 방법

### 1. 외부 크론 서비스 사용

시간별 크론 작업이 필요한 경우 외부 서비스를 사용할 수 있습니다:

- **GitHub Actions**: 무료 크론 작업 지원
- **Cron-job.org**: 무료 크론 서비스
- **EasyCron**: 무료 크론 서비스

### 2. 클라이언트 사이드 폴링

실시간 통계가 필요한 경우 클라이언트에서 주기적으로 API를 호출할 수 있습니다.

### 3. 이벤트 기반 처리

특정 이벤트 발생 시 통계를 업데이트하는 방식으로 변경할 수 있습니다.

## 📚 참고 자료

- [Vercel Cron Jobs 문서](https://vercel.com/docs/cron-jobs)
- [Vercel 플랜 비교](https://vercel.com/pricing)
- [Vercel Hobby 플랜 제한](https://vercel.com/docs/limits)

## ✨ 권장 사항

1. **현재**: 일일 크론 작업만 사용 (Hobby 플랜 제한 준수)
2. **필요시**: 시간별 통계는 수동 호출 또는 일일 크론에서 집계
3. **향후**: 트래픽 증가 시 Pro 플랜 업그레이드 고려

